{% extends 'base.html' %}
{% block content %}
<div class="col-md-6 col-lg-6 col-xl-6">
    <div class="row">
        <div class="card" style="width:100%;">
            <h3 class="card-header">Type your message:</h3>
            <div class="card-block">
                <!-- Add new message -->
                <div class="form-group">
                    <form action="{{url_for('groups.createMessage')}}" method='POST'>
                        {{message_form.group_id}}
                        {{message_form.csrf_token}}
                        <div class="row">
                            {{message_form.content(class="form-control", rows=5)}}
                        </div>
                        <div class="row" style="padding-top: 10px; text-align:-webkit-right;">
                            <div class="col-xs-12">
                                <input class="btn btn-primary" type="submit" value="Respond">
                            </div>                                    
                        </div>
                    </form>
                </div>
            </div>
        </div>
            <!-- Messages -->
            {% for message in messages %}
                <div class="card" style="width: 100%;">
                    <div class="card-block">
                        <div class="row">
                            <div class="col-xs-2 col-xl-1" style="height: 50px;">
                                <img src="{{message.user.profile_image}}" alt="Profile Image" class="img-responsive" style="height: 100%" />
                            </div>
                            <div class="col-xs-10">
                                <div class="row">
                                    <h4 class="card-title">
                                        {{ message.user.fname }} {{ message.user.lname }}
                                        {% if group.leader_id == message.user.id %}
                                            <h6 style="padding-top: 10px;"><span class="tag tag-primary">Group Leader</span></h6>
                                        {% endif %}
                                    </h4>
                                </div>
                                <div class="row">
                                    <h6 class="card-subtitle mb-2 text-muted">{{ message.date_created }}</h6>
                                </div>
                            </div>
                        </div>                                   
                        <div class="row">
                            <div class="col-xs-12">
                                <p class="card-text">{{ message.content }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
    </div>
</div>