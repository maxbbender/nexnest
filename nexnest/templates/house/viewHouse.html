{% extends "base.html" %}
{% block content %}
<link href="{{url_for('static', filename='css/landlord/dashboardStyling.css')}}" rel="stylesheet">
<div class="row">
    <div class="col-md-2 col-sm-1 hidden-xs display-table-cell v-align box" id="navigation" style="height: inherit;">
        <div class="navi navbar">
        	<ul>
        		<li class="nav-item">
        	        <a class="nav-link active" data-toggle="tab" href="#statusTab" role="tab">
        	        	<i class="fa fa-tasks" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Maintence Requests</span>
        	        </a>
        	    </li>
        	    <li class="nav-item">
        	        <a class="nav-link" data-toggle="tab" href="#membersTab" role="tab">
        	        	<i class="fa fa-tasks" aria-hidden="true"></i>
        	        	<span class="hidden-xs hidden-sm">
        	        		{% if current_user in landlords %}
        	        			Group Members
        	        		{% else %}
        	        			The Landlord
        	        		{% endif %}
        	        	</span>
        	        </a>
        	    </li>
        	    <li class="nav-item">
        	        <a class="nav-link" data-toggle="tab" href="#propertyTab" role="tab">
        	        	<i class="fa fa-tasks" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Property</span>
        	        </a>
        	    </li>
        	</ul>
        </div>
    </div>
    <div class="col-sm-10 col-md-9">
    	<div class="row m-x-auto">
	        <div class="col-xs-12">
	            <div class="callout-block text-center fade-in-b">
	                <h1>
	                    <strong>{{ house.group.name }}</strong> Occupy:
	                    <br>
	                    {{ house.listing.street }} 
	                    for {{ house.listing.start_date }} to {{ house.listing.end_date }}
	                </h1>
	            </div>
	        </div>
    	</div>
    	<br>
    	<div class="row">
    		<div class="col-xs-8">
			    <div class="card" style="width:100%;">
			        <h3 class="card-header">Type your message:</h3>
			        <div class="card-block">
			            <!-- Add new message -->
			            <div class="form-group">
			                <form action="{{url_for('houses.messageCreate')}}" method='POST'>
			                    {{messageForm.groupListingID(value=house.id)}}
			                    {{messageForm.csrf_token}}
			                    <div class="row">
			                        {{messageForm.content(class="form-control", rows=5)}}
			                    </div>
			                    <div class="row" style="padding-top: 10px; text-align:-webkit-right;">
			                        <div class="col-xs-12">
			                            <input class="btn btn-primary" type="submit" value="Respond">
			                        </div>                                    
			                    </div>
			                </form>
			            </div>
			        </div>
			    </div>
			    <!-- Messages -->
			    {% for message in messages %}
			        {% include 'house/message.html' %}
			    {% endfor %}
    		</div>
    		<div class="col-xs-4">
			    <div class="tab-content">
				    <div class="tab-pane active" id="statusTab" role="tabpanel" style="padding: 0px;">
				    	<div class="row">
				    	    <div class="card" style="width:100%;">
				    	        <h3 class="card-header">Request Status</h3>
				    	        <div class="card-block">
				    	            <div class="row">
				    	            	
				    	            </div>
				    	        </div>
				    	    </div>
				    	</div>
				    </div>
			        <div class="tab-pane" id="membersTab" role="tabpanel" style="padding: 0px;">
			        	<div class="row">
			        	    <div class="card" style="width:100%;">
			        	        <h3 class="card-header">Members</h3>
			        	        <div class="card-block">
			        	            <div class="row">
			        	                <div class="col-xs-12">
			        	                    <div class="row">
			        	                        <div class="col-xs-12">
			        	                            {% if current_user in landlords %}
			        	                                <p class="card-text"><strong>The group requesting the property: </strong>{{ house.group.name }}</p>
			        	                                {% with group=house.group %}
			        	                                    {% for user in group.acceptedUsers %}                                    
			        	                                        {% include 'tour/member.html' %}
			        	                                    {% endfor %}
			        	                                {% endwith %}
			        	                            {% else %}
			        	                                <p class="card-text"><strong>The property owner:</strong></p>
			        	                                {% for user in landlords %}
			        	                                    {% include 'tour/member.html' %}
			        	                                {% endfor %}
			        	                            {% endif %}
			        	                        </div>
			        	                    </div>
			        	                </div>
			        	            </div>
			        	        </div>
			        	    </div>
			        	</div>	            
			        </div>
			        <div class="tab-pane" id="propertyTab" role="tabpanel" style="padding: 0px;">
				    	<div class="row">
				    	    <div class="card" style="width:100%;">
				    	        <h3 class="card-header">The Property</h3>
				    	        <div class="card-block">
				    	            <div class="row">
				    	                {% with listing=house.listing %}
				    	                    {% include 'listing.html' %}
				    	                {% endwith %}
				    	            </div>
				    	        </div>
				    	    </div>
				    	</div>
				    </div>
				</div>
    		</div>
    	</div>
    </div>
</div>

{% endblock %}
{% block scripts %}
<script>  

</script>
{% endblock %}
